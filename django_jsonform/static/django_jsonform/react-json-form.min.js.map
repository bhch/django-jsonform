{"version":3,"file":"react-json-form.min.js","sources":["../src/data.js","../src/components/buttons.js","../src/components/loaders.js","../src/components/icons.js","../src/components/widgets.js","../src/util.js","../src/components/form.js","../src/components/containers.js","../src/components/uploader.js","../src/ui.js","../src/form.js","../src/index.js","../src/renderer.js"],"sourcesContent":["export function getBlankObject(schema, getRef) {\n    let keys = {};\n\n    let schema_keys = schema.keys || schema.properties;\n\n    for (let key in schema_keys) {\n        let value = schema_keys[key];\n        \n        let isRef = value.hasOwnProperty('$ref');\n        \n        if (isRef)\n            value = getRef(value['$ref']);\n\n        let type = value.type;\n\n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n\n        if (type === 'array')\n            keys[key] = isRef ? [] : getBlankArray(value, getRef);\n        else if (type === 'object')\n            keys[key] = getBlankObject(value, getRef);\n        else if (type === 'boolean')\n            keys[key] = value.default || false;\n        else if (type === 'integer' || type === 'number')\n            keys[key] = value.default || null;\n        else // string etc.\n            keys[key] = value.default || '';\n    }\n\n    return keys;\n}\n\n\nexport function getBlankArray(schema, getRef) {\n    if (schema.default)\n        return schema.default;\n\n    let items = [];\n\n    let minItems = schema.minItems || schema.min_items || 0;\n\n    if (minItems === 0)\n        return items;\n\n    if (schema.items.hasOwnProperty('$ref')) {\n        // :TODO: this will most probably mutate the original schema\n        // but i'll fix it later\n        schema.items = getRef(schema.items['$ref']);\n    }\n\n    let type = schema.items.type;\n\n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array') {\n        items.push(getBlankArray(schema.items, getRef))\n        return items;\n    }\n    else if (type === 'object') {\n        items.push(getBlankObject(schema.items, getRef));\n        return items;\n    }\n\n    if (schema.items.widget === 'multiselect')\n        return items;\n\n    if (type === 'boolean')\n        items.push(schema.items.default || false);\n    else if (type === 'integer' || type === 'number')\n        items.push(schema.items.default || null);\n    else // string, etc.\n        items.push(schema.items.default || '');\n\n    return items;\n}\n\n\nexport function getBlankData(schema, getRef) {\n    if (schema.hasOwnProperty('$ref'))\n        schema = getRef(schema['$ref']);\n\n    let type = schema.type;\n\n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array')\n        return getBlankArray(schema, getRef);\n    else if (type === 'object')\n        return getBlankObject(schema, getRef);\n    else if (type === 'boolean')\n        return schema.default || false;\n    else if (type === 'integer' || type === 'number')\n        return schema.default || null;\n    else // string, etc.\n        return schema.default || '';\n}\n\n\n\nfunction getSyncedArray(data, schema, getRef) {\n    let newData = JSON.parse(JSON.stringify(data));\n\n    if (schema.items.hasOwnProperty('$ref')) {\n        // :TODO: this will most probably mutate the original schema\n        // but i'll fix it later\n        schema.items = getRef(schema.items['$ref'])\n    }\n\n    let type = schema.items.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    for (let i = 0; i < data.length; i++) {\n        let item = data[i];\n\n        if (type === 'array') {\n            newData[i] = getSyncedArray(item, schema.items, getRef);\n        } else if (type === 'object') {\n            newData[i] = getSyncedObject(item, schema.items, getRef);\n        }\n        else {\n            if ((type === 'integer' || type === 'number') && item === '')\n                newData[i] = null;\n        }\n    }\n\n    return newData;\n}\n\n\nfunction getSyncedObject(data, schema, getRef) {\n    let newData = JSON.parse(JSON.stringify(data));\n\n    let schema_keys = schema.keys || schema.properties;\n\n    let keys = [...Object.keys(schema_keys)];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let schemaValue = schema_keys[key];\n        \n        let isRef = schemaValue.hasOwnProperty('$ref');\n        \n        if (isRef)\n            schemaValue = getRef(schemaValue['$ref']);\n\n        let type = schemaValue.type;\n    \n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n      \n        if (!data.hasOwnProperty(key)) {\n            if (type === 'array')\n                newData[key] = getSyncedArray([], schemaValue, getRef);\n            else if (type === 'object')\n                newData[key] = getSyncedObject({}, schemaValue, getRef);\n            else if (type === 'boolean')\n                newData[key] = false;\n            else if (type === 'integer' || type === 'number')\n                newData[key] = null;\n            else\n                newData[key] = '';\n        } else {\n            if (type === 'array')\n                newData[key] = getSyncedArray(data[key], schemaValue, getRef);\n            else if (type === 'object')\n                newData[key] = getSyncedObject(data[key], schemaValue, getRef);\n            else {\n                if ((type === 'integer' || type === 'number') && data[key] === '')\n                    newData[key] = null;\n                else\n                    newData[key] = data[key];\n            }\n        }\n        \n    }\n\n    return newData;\n}\n\n\nexport function getSyncedData(data, schema, getRef) {\n    // adds those keys to data which are in schema but not in data\n\n    if (schema.hasOwnProperty('$ref'))\n        schema = getRef(schema['$ref']);\n\n    let type = schema.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array') {\n        return getSyncedArray(data, schema, getRef);\n    } else if (type === 'object') {\n        return getSyncedObject(data, schema, getRef);\n    }\n\n    return data;\n}\n","export default function Button({className, ...props}) {\n    if (!className)\n        className = '';\n\n    let classes = className.split(' ');\n\n    className = '';\n    for (let i = 0; i < classes.length; i++) {\n        className = className + 'rjf-' + classes[i] + '-button ';\n    }\n\n    return (\n        <button \n            className={className.trim()}\n            type=\"button\"\n            {...props}\n        >\n            {props.children}\n        </button>\n    );\n}","export default function Loader (props) {\n    let className = 'rjf-loader';\n    if (props.className)\n        className = className + ' ' + props.className;\n\n    return <div className={className}></div>;\n}\n","export default function Icon(props) {\n    let icon;\n\n    switch (props.name) {\n        case 'chevron-up':\n            icon = <ChevronUp />;\n            break;\n        case 'chevron-down':\n            icon = <ChevronDown />;\n            break;\n        case 'arrow-down':\n            icon = <ArrowDown />;\n            break;\n        case 'x-lg':\n            icon = <XLg />;\n            break;\n    }\n\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className={\"rjf-icon rjf-icon-\" + props.name} viewBox=\"0 0 16 16\">\n            {icon}\n        </svg>\n    );\n}\n\nfunction ChevronUp(props) {\n    return (\n        <path fillRule=\"evenodd\" d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z\"/>\n    );\n}\n\nfunction ChevronDown(props) {\n    return (\n        <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n    );\n}\n\nfunction ArrowDown(props) {\n    return (\n        <path fill-rule=\"evenodd\" d=\"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z\"/>\n    );\n}\n\nfunction XLg(props) {\n    return (\n        <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n    );\n}\n","import Button from './buttons';\nimport Icon from './icons';\n\n\nexport class TimePicker extends React.Component {\n    componentWillUnmount() {\n        let data = {\n            hh: this.validateValue('hh', this.props.hh).toString().padStart(2, '0'),\n            mm: this.validateValue('mm', this.props.mm).toString().padStart(2, '0'),\n            ss: this.validateValue('ss', this.props.ss).toString().padStart(2, '0')\n        }\n        this.sendValue(data);\n    }\n\n    sendValue = (data) => {\n        this.props.onChange(data);\n    }\n\n    validateValue = (name, value) => {\n        if (name === 'hh' && value < 1)\n            return 1;\n        else if (name !== 'hh' && value < 0)\n            return 0;\n        else if (name === 'hh' && value > 12)\n            return 12;\n        else if (name !== 'hh' && value > 59)\n            return 59;\n\n        return value;\n    }\n\n    handleChange = (e) => {\n        let name = e.target.dataset.name;\n        let value = e.target.value;\n\n        if (isNaN(value))\n            return;\n\n        let validValue = this.validateValue(name, parseInt(value) || 0);\n\n        if (name === 'hh' && (value === '0' || value === '' || value === '00') && validValue === 1)\n            validValue = 0;\n\n        if (value.startsWith('0') && validValue < 10 && validValue !== 0) {\n            validValue = validValue.toString().padStart(2, '0');\n        }\n\n        this.sendValue({[name]: value !== '' ? validValue.toString() : ''});\n    }\n\n    handleKeyDown = (e) => {\n        if (e.keyCode !== 38 && e.keyCode !== 40)\n            return;\n\n        let name = e.target.dataset.name;\n        let value = parseInt(e.target.value) || 0;\n\n        if (e.keyCode === 38) {\n            value++;\n        } else if (e.keyCode === 40) {\n            value--;\n        }\n\n        this.sendValue({[name]: this.validateValue(name, value).toString().padStart(2, '0')});\n    }\n\n    handleSpin = (name, type) => {\n        let value = this.props[name];\n\n        if (name === 'ampm') {\n            value = value === 'am' ? 'pm': 'am';\n        } else {\n            value = parseInt(value) || 0;\n            if (type === 'up') {\n                value++;\n            } else {\n                value--;\n            }\n            value = this.validateValue(name, value).toString().padStart(2, '0');\n        }\n\n        this.sendValue({[name]: value});\n    }\n\n    handleBlur = (e) => {\n        let value = this.validateValue(e.target.dataset.name, parseInt(e.target.value) || 0);\n\n        if (value < 10) {\n            this.sendValue({[e.target.dataset.name]: value.toString().padStart(2, '0')});\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-time-picker\">\n                <div className=\"rjf-time-picker-row rjf-time-picker-labels\">\n                    <div className=\"rjf-time-picker-col\">Hrs</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">Min</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">Sec</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">am/pm</div>\n                </div>\n\n                <div className=\"rjf-time-picker-row\">\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('hh', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('mm', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ss', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ampm', 'up')}><Icon name=\"chevron-up\"/></Button></div> \n                </div>\n\n                <div className=\"rjf-time-picker-row rjf-time-picker-values\">\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"hh\" value={this.props.hh} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\">:</div>\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"mm\" value={this.props.mm} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\">:</div>\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"ss\" value={this.props.ss} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">{this.props.ampm}</div>\n                </div>\n\n                <div className=\"rjf-time-picker-row\">\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('hh', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('mm', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ss', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ampm', 'down')}><Icon name=\"chevron-down\"/></Button></div> \n                </div>\n            </div>\n        );\n    }\n}\n","export const EditorContext = React.createContext();\n\n\nexport function capitalize(string) {\n    if (!string)\n        return '';\n    \n    return string.charAt(0).toUpperCase() + string.substr(1).toLowerCase();\n}\n\n\nexport function getVerboseName(name) {\n    if (name === undefined || name === null)\n        return '';\n\n    name = name.replace(/_/g, ' ');\n    return capitalize(name);\n}\n\n\nexport function getCsrfCookie() {\n    let csrfCookies = document.cookie.split(';').filter((item) => item.trim().indexOf('csrftoken=') === 0);\n\n    if (csrfCookies.length) {\n        return csrfCookies[0].split('=')[1];\n    } else {\n        // if no cookie found, get the value from the csrf form input\n        let input = document.querySelector('input[name=\"csrfmiddlewaretoken\"]');\n        if (input)\n            return input.value;\n    }\n\n    return null;\n}\n","import Button from './buttons';\nimport Loader from './loaders';\nimport {TimePicker} from './widgets';\nimport {EditorContext, getCsrfCookie, capitalize} from '../util';\n\n\nexport function FormInput({label, help_text, error, inputRef, ...props}) {\n\n    if (props.type === 'string')\n        props.type = 'text'\n\n    if (inputRef)\n        props.ref = inputRef;\n\n    if (props.value === null)\n        props.value = '';\n\n    return (\n        <div>\n            {label && <label>{label}</label>}\n            <div className=\"rjf-input-group\">\n                <input {...props} />\n                {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n            </div>\n        </div>\n    );\n}\n\n\nexport function FormCheckInput({label, help_text, error, value, ...props}) {\n\n    if (!label)\n        label = props.name.toUpperCase();\n\n    if (props.type === 'bool')\n        props.type = 'checkbox';\n\n    if (props.checked === undefined)\n        props.checked = value;\n\n    if (props.checked === '' || props.checked === null || props.checked === undefined)\n        props.checked = false\n\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div className=\"rjf-check-input\">\n            <label><input {...props} /> {label}</label>\n            {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n        </div>\n    );\n}\n\n\nexport function FormRadioInput({label, help_text, error, value, options, ...props}) {\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div className=\"rjf-check-input\">\n            <label>{label}</label>\n            {options.map((option, i) => {\n                let label, inputValue;\n                if (typeof option === 'object') {\n                    label = option.label;\n                    inputValue = option.value;\n                } else {\n                    label = option;\n                    if (typeof label === 'boolean')\n                        label = capitalize(label.toString());\n                    inputValue = option;\n                }\n\n                return (\n                    <label key={label + '_' + inputValue + '_' + i}>\n                        <input {...props} value={inputValue} checked={inputValue === value} /> {label}\n                    </label>\n                );\n            })}\n            {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n        </div>\n    );\n}\n\n\nexport function FormSelectInput({label, help_text, error, value, options, ...props}) {\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div>\n            {label && <label>{label}</label>}\n            <div className=\"rjf-input-group\">\n                <select value={value || ''} {...props}>\n                    <option disabled value=\"\" key={'__placehlder'}>Select...</option>\n                    {options.map((option, i) => {\n                        let label, inputValue;\n                        if (typeof option === 'object') {\n                            label = option.label;\n                            inputValue = option.value;\n                        } else {\n                            label = option;\n                            if (typeof label === 'boolean')\n                                label = capitalize(label.toString());\n                            inputValue = option;\n                        }\n\n                        return (\n                            <option value={inputValue} key={label + '_' + inputValue + '_' + i}>\n                                {label}\n                            </option>\n                        );\n                    })}\n                </select>\n                {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n            </div>\n        </div>\n    );\n}\n\nexport class FormMultiSelectInput extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showOptions: false\n        };\n\n        this.optionsContainer = React.createRef();\n        this.input = React.createRef();\n    }\n\n    handleChange = (e) => {\n        let value = [...this.props.value];\n\n        if (e.target.checked) {\n            value.push(e.target.value);\n        } else {\n            value = value.filter((item) => item !== e.target.value);\n        }\n\n        let event = {\n            target: {\n                type: this.props.type,\n                value: value,\n                name: this.props.name\n            }\n        };\n\n        this.props.onChange(event);\n    }\n\n    showOptions = (e) => {\n        if (!this.state.showOptions)\n            this.setState({showOptions: true});\n    }\n\n    hideOptions = (e) => {\n        this.setState({showOptions: false});\n    }\n\n    toggleOptions = (e) => {\n        this.setState((state) => ({showOptions: !state.showOptions}))\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-multiselect-field\">\n                <FormInput\n                    label={this.props.label}\n                    type=\"text\"\n                    value={this.props.value.length ? this.props.value.length + ' selected' : 'Select...'}\n                    help_text={this.props.help_text}\n                    error={this.props.error}\n                    onClick={this.toggleOptions}\n                    readOnly={true}\n                    inputRef={this.input}\n                    className=\"rjf-multiselect-field-input\"\n                />\n                {this.state.showOptions &&\n                    <FormMultiSelectInputOptions\n                        options={this.props.options}\n                        value={this.props.value}\n                        hideOptions={this.hideOptions}\n                        onChange={this.handleChange}\n                        containerRef={this.optionsContainer}\n                        inputRef={this.input}\n                        disabled={this.props.readOnly}\n                        hasHelpText={this.props.help_text && 1}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\nclass FormMultiSelectInputOptions extends React.Component {\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside = (e) => {\n        if (this.props.containerRef.current &&\n            !this.props.containerRef.current.contains(e.target) &&\n            !this.props.inputRef.current.contains(e.target)\n        )\n            this.props.hideOptions();\n    };\n\n    render() {\n        return (\n            <div ref={this.props.containerRef}>\n                <div\n                    className=\"rjf-multiselect-field-options-container\"\n                    style={this.props.hasHelpText ? {marginTop: '-15px'} : {}}\n                >\n                    {this.props.options.map((option, i) => {\n                        let label, inputValue;\n                        if (typeof option === 'object') {\n                            label = option.label;\n                            inputValue = option.value;\n                        } else {\n                            label = option;\n                            if (typeof label === 'boolean')\n                                label = capitalize(label.toString());\n                            inputValue = option;\n                        }\n\n                        let selected = this.props.value.indexOf(inputValue) > -1;\n\n                        let optionClassName = 'rjf-multiselect-field-option';\n                        if (selected)\n                            optionClassName += ' selected';\n                        if (this.props.disabled)\n                            optionClassName += ' disabled';\n\n                        return (\n                            <div key={label + '_' + inputValue + '_' + i} className={optionClassName}>\n                                <label>\n                                    <input\n                                        type=\"checkbox\"\n                                        onChange={this.props.onChange}\n                                        value={inputValue}\n                                        checked={selected}\n                                        disabled={this.props.disabled}\n                                    /> {label}\n                                </label>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport function dataURItoBlob(dataURI) {\n      // Split metadata from data\n      const splitted = dataURI.split(\",\");\n      // Split params\n      const params = splitted[0].split(\";\");\n      // Get mime-type from params\n      const type = params[0].replace(\"data:\", \"\");\n      // Filter the name property from params\n      const properties = params.filter(param => {\n            return param.split(\"=\")[0] === \"name\";\n      });\n      // Look for the name and use unknown if no name property.\n      let name;\n      if (properties.length !== 1) {\n            name = \"unknown\";\n      } else {\n            // Because we filtered out the other property,\n            // we only have the name case here.\n            name = properties[0].split(\"=\")[1];\n      }\n\n      // Built the Uint8Array Blob parameter from the base64 string.\n      const binary = atob(splitted[1]);\n      const array = [];\n      for (let i = 0; i < binary.length; i++) {\n            array.push(binary.charCodeAt(i));\n      }\n      // Create the blob object\n      const blob = new window.Blob([new Uint8Array(array)], { type });\n\n      return {blob, name};\n}\n\n\n\nexport class FormFileInput extends React.Component {\n    static contextType = EditorContext;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: props.value,\n            fileName: this.getFileName(),\n            loading: false\n        };\n\n        this.inputRef = React.createRef();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.value !== prevProps.value) {\n            this.setState({\n                value: this.props.value, \n                fileName: this.getFileName()\n            });\n        }\n    }\n\n    getFileName = () => {\n        if (!this.props.value)\n            return '';\n\n        if (this.props.type === 'data-url') {\n            return this.extractFileInfo(this.props.value).name;\n        } else if (this.props.type === 'file-url') {\n            return this.props.value;\n        } else {\n            return 'Unknown file';\n        }\n    }\n\n    extractFileInfo = (dataURL) => {\n        const {blob, name} = dataURItoBlob(dataURL);\n        return {\n            name: name,\n            size: blob.size,\n            type: blob.type\n        }\n    }\n\n    addNameToDataURL = (dataURL, name) => {\n        return dataURL.replace(';base64', ';name=' + encodeURIComponent(name) + ';base64');\n    }\n\n    handleChange = (e) => {\n        if (this.props.type === 'data-url') {\n            let file = e.target.files[0];\n            let fileName = file.name\n\n            let reader = new FileReader();\n\n            reader.onload = () => {\n\n                // this.setState({src: reader.result});\n\n                // we create a fake event object\n                let event = {\n                    target: {\n                        type: 'text',\n                        value: this.addNameToDataURL(reader.result, fileName),\n                        name: this.props.name\n                    }\n                };\n\n                this.props.onChange(event);\n\n            }\n            reader.readAsDataURL(file);\n        } else if (this.props.type === 'file-url') {\n            let endpoint = this.context.fileUploadEndpoint;\n            if (!endpoint) {\n                console.error(\n                    \"Error: fileUploadEndpoint option need to be passed \"\n                    + \"while initializing editor for enabling file uploads.\");\n                alert(\"Files can't be uploaded.\");\n                return;\n            }\n\n            this.setState({loading: true});\n\n            let formData = new FormData();\n            formData.append('field_name', this.context.fieldName);\n            formData.append('model_name', this.context.modelName);\n            formData.append('uid', this.context.uid);\n            formData.append('coordinates', JSON.stringify(this.props.name.split('-').slice(1)));\n            formData.append('file', e.target.files[0]);\n\n            fetch(endpoint, {\n                method: 'POST',\n                headers: {\n                    'X-CSRFToken': getCsrfCookie(),\n                },\n                body: formData\n            })\n            .then((response) => response.json())\n            .then((result) => {\n                // we create a fake event object\n                let event = {\n                    target: {\n                        type: 'text',\n                        value: result.file_path,\n                        name: this.props.name\n                    }\n                };\n\n                this.props.onChange(event);\n                this.setState({loading: false});\n            })\n            .catch((error) => {\n                alert('Something went wrong while uploading file');\n                console.error('Error:', error);\n                this.setState({loading: false});\n            });\n\n        }\n\n    }\n\n    showFileBrowser = () => {\n        this.inputRef.current.click();\n    }\n\n    clearFile = () => {\n        if (window.confirm('Do you want to remove this file?')) {\n            let event = {\n                target: {\n                    type: 'text',\n                    value: '',\n                    name: this.props.name\n                }\n            };\n\n            this.props.onChange(event);\n            \n            if (this.inputRef.current)\n                this.inputRef.current.value = '';\n        }\n    }\n\n    render() {\n        let {label, value, ...props} = {value, ...this.props};\n        props.type = 'file';\n        props.onChange = this.handleChange;\n\n        if (props.readOnly)\n            props.disabled = true;\n\n        return (\n            <div> \n                {label && <label>{label}</label>}\n                <div className=\"rjf-file-field\">\n                    {this.state.value && \n                        <div className=\"rjf-current-file-name\">\n                            Current file: <span>{this.state.fileName}</span> {' '}\n                            <Button className=\"remove-file\" onClick={this.clearFile}>Clear</Button>\n                        </div>\n                    }\n                    {this.state.value && !this.state.loading && 'Change:'}\n                    {this.state.loading ?\n                        <div className=\"rjf-file-field-loading\"><Loader/> Uploading...</div>\n                    : \n                    <div className=\"rjf-file-field-input\">\n                        <FormInput {...props} inputRef={this.inputRef} />\n                    </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport class FormTextareaInput extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (!props.inputRef)\n            this.inputRef = React.createRef();\n    }\n\n    handleChange = (e) => {\n        this.updateHeight(e.target);\n\n        if (this.props.onChange)\n            this.props.onChange(e);\n    }\n\n    updateHeight = (el) => {\n        let offset = el.offsetHeight - el.clientHeight;\n        el.style.height = 'auto';\n        el.style.height = (el.scrollHeight + offset) + 'px';\n    }\n\n    componentDidMount() {\n        if (this.props.inputRef)\n            this.updateHeight(this.props.inputRef.current);\n        else \n            this.updateHeight(this.inputRef.current);\n    }\n\n    render() {\n        let {label, help_text, error, inputRef, ...props} = this.props;\n\n        delete props.type;\n\n        props.ref = inputRef || this.inputRef;\n        props.onChange = this.handleChange;\n\n        return (\n            <div>\n                {label && <label>{label}</label>}\n                <div className=\"rjf-input-group\">\n                    <textarea {...props} />\n                    {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport class FormDateTimeInput extends React.Component {\n    constructor(props) {\n        super(props);\n        // we maintain this input's state in itself\n        // so that we can only pass valid values\n        // otherwise keep the value empty if invalid\n\n        this.state = {\n            ...this.getStateFromProps(),\n            showTimePicker: false,\n        };\n\n        this.timeInput = React.createRef();\n        this.timePickerContainer = React.createRef();\n    }\n\n    getStateFromProps = () => {\n        let date = '';\n        let hh = '12';\n        let mm = '00';\n        let ss = '00';\n        let ms = '000';\n        let ampm = 'am';\n\n        if (this.props.value) {\n            let d = new Date(this.props.value);\n            let year = d.getFullYear().toString().padStart(2, '0');\n            let month = (d.getMonth() + 1).toString().padStart(2, '0');\n            let day = d.getDate().toString().padStart(2, '0');\n            date = year + '-' + month + '-' + day;\n\n            hh = d.getHours();\n            if (hh === 0) {\n                hh = 12;\n            } else if (hh === 12) {\n                ampm = 'pm';\n            } else if (hh > 12) {\n                hh = hh - 12;\n                ampm = 'pm';\n            }\n\n            mm = d.getMinutes();\n            ss = d.getSeconds();\n            ms = d.getMilliseconds();\n\n            hh = hh.toString().padStart(2, '0');\n            mm = mm.toString().padStart(2, '0');\n            ss = ss.toString().padStart(2, '0');\n        }\n\n        return {\n            date: date, hh: hh, mm: mm, ss: ss, ms: ms, ampm: ampm\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.value !== this.props.value) {\n            if (this.state.hh !== '' && this.state.hh !== '0' && this.state.hh !== '00') {\n\n                let changed = false;\n                let newState = this.getStateFromProps();\n                \n                for (let key in newState) {\n                    if (newState[key] !== this.state[key]) {\n                        changed = true;\n                        break;\n                    }\n                }\n\n                if (changed)\n                    this.setState({...newState});\n            }\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside = (e) => {\n        if (this.state.showTimePicker) {\n            if (this.timePickerContainer.current &&\n                !this.timePickerContainer.current.contains(e.target) &&\n                !this.timeInput.current.contains(e.target)\n            )\n                this.setState({showTimePicker: false});\n        }\n    };\n\n    sendValue = () => {\n        // we create a fake event object\n        // to send a combined value from two inputs\n        let event = {\n            target: {\n                type: 'text',\n                value: '',\n                name: this.props.name\n            }\n        };\n\n        if (this.state.date === '' || this.state.date === null)\n            return this.props.onChange(event);\n\n        let hh = parseInt(this.state.hh);\n\n        if (hh === 0)\n            hh = NaN; // zero value is invalid for 12 hour clock, but will be valid for 24 hour clock\n                      // so we set it to NaN to prevent creating a date object\n        \n        if (this.state.ampm === 'am') {\n            if (hh === 12)\n                hh = 0;\n        } else if (this.state.ampm === 'pm') {\n            if (hh !== 12)\n                hh = hh + 12;\n        }\n\n        hh = hh.toString().padStart(2, '0');\n        let mm = this.state.mm.padStart(2, '0');\n        let ss = this.state.ss.padStart(2, '0');\n\n        try {\n            let date = new Date(this.state.date + 'T' + hh + ':' + mm + ':' + ss + '.' + this.state.ms);\n            event['target']['value'] = date.toISOString().replace('Z', '+00:00') // make compatible to python\n        } catch (err) {\n            // invalid date\n            return this.props.onChange(event);\n        }\n\n        this.props.onChange(event);\n    }\n\n    handleDateChange = (e) => {\n        this.setState({date: e.target.value}, this.sendValue);\n    }\n\n    handleTimeChange = (value) => {\n        this.setState({...value}, this.sendValue);\n    }\n\n    showTimePicker = () => {\n        this.setState({showTimePicker: true});\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-datetime-field\">\n                {this.props.label && <label>{this.props.label}</label>}\n                <div className=\"rjf-datetime-field-inner\">\n                    <div className=\"rjf-datetime-field-inputs\">\n                        <div className=\"rjf-datetime-field-date\">\n                            <FormInput\n                                label='Date'\n                                type='date'\n                                value={this.state.date}\n                                onChange={this.handleDateChange}\n                            />\n                        </div>\n                        <div className=\"rjf-datetime-field-time\">\n                            <FormInput\n                                label='Time'\n                                type='text'\n                                value={this.state.hh + ':' + this.state.mm + ':' + this.state.ss + ' ' + this.state.ampm}\n                                onFocus={this.showTimePicker}\n                                readOnly={true}\n                                inputRef={this.timeInput}\n                            />\n                            <div ref={this.timePickerContainer}>\n                                {this.state.showTimePicker &&\n                                    <TimePicker\n                                        onChange={this.handleTimeChange}\n                                        hh={this.state.hh}\n                                        mm={this.state.mm}\n                                        ss={this.state.ss}\n                                        ampm={this.state.ampm}\n                                    />\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    {this.props.help_text && <span className=\"rjf-help-text\">{this.props.help_text}</span>}\n                </div>\n            </div>\n        );\n    }\n}\n","import Button from './buttons';\n\n\nexport function GroupTitle(props) {\n    if (!props.children)\n        return null;\n\n    return (\n        <div className=\"rjf-form-group-title\">\n            {props.editable ?\n                <span>{props.children} <Button className=\"edit\" onClick={props.onEdit} title=\"Edit\">Edit</Button></span>\n                :\n                props.children\n            }\n        </div>\n    );\n}\n\n\nfunction animate(e, animation, callback) {\n    let el = e.target.parentElement.parentElement;\n    let prevEl = el.previousElementSibling;\n    let nextEl = el.nextElementSibling;\n\n    el.classList.add('rjf-animate', 'rjf-' + animation);\n\n    if (animation === 'move-up') {\n        let {y, height} = prevEl.getBoundingClientRect();\n        let y1 = y, h1 = height;\n        \n        ({y, height} = el.getBoundingClientRect());\n        let y2 = y, h2 = height;\n        \n        prevEl.classList.add('rjf-animate');\n\n        prevEl.style.opacity = 0;\n        prevEl.style.transform = 'translateY(' + (y2 - y1)  + 'px)';\n\n        el.style.opacity = 0;\n        el.style.transform = 'translateY(-' + (y2 - y1)  + 'px)';\n\n    } else if (animation === 'move-down') {\n        let {y, height} = el.getBoundingClientRect();\n        let y1 = y, h1 = height;\n        \n        ({y, height} = nextEl.getBoundingClientRect());\n        let y2 = y, h2 = height;\n        \n        nextEl.classList.add('rjf-animate');\n\n        nextEl.style.opacity = 0;\n        nextEl.style.transform = 'translateY(-' + (y2 - y1)  + 'px)';\n\n        el.style.opacity = 0;\n        el.style.transform = 'translateY(' + (y2 - y1)  + 'px)';\n    }\n\n    setTimeout(function() {\n        callback();\n        \n        el.classList.remove('rjf-animate', 'rjf-' + animation);\n        el.style = null;\n\n        if (animation === 'move-up') {\n            prevEl.classList.remove('rjf-animate');\n            prevEl.style = null;\n        }\n        else if (animation === 'move-down') {\n            nextEl.classList.remove('rjf-animate');\n            nextEl.style = null;\n        }\n    }, 200);\n}\n\nexport function FormRowControls(props) {\n    return (\n        <div className=\"rjf-form-row-controls\">\n            {props.onMoveUp &&\n                <Button \n                    className=\"move-up\"\n                    onClick={(e) => animate(e, 'move-up', props.onMoveUp)}\n                    title=\"Move up\"\n                >\n                    <span>&uarr;</span>\n                </Button>\n            }\n            {props.onMoveDown &&\n                <Button \n                    className=\"move-down\"\n                    onClick={(e) => animate(e, 'move-down', props.onMoveDown)}\n                    title=\"Move down\"\n                >\n                    <span>&darr;</span>\n                </Button>\n            }\n            {props.onRemove &&\n                <Button \n                    className=\"remove\"\n                    onClick={(e) => animate(e, 'remove', props.onRemove)}\n                    title=\"Remove\"\n                >\n                    <span>&times;</span>\n                </Button>\n            }\n        </div>\n    );\n}\n\nexport function FormRow(props) {\n    return (\n        <div className=\"rjf-form-row\">\n            <FormRowControls {...props} />\n            <div className=\"rjf-form-row-inner\">\n                {props.children}\n            </div>\n        </div>\n    );\n}\n\n\nexport function FormGroup(props) {\n    let hasChildren = React.Children.count(props.children);\n\n    let innerClassName = props.level === 0 && !hasChildren\n        ? \"\" \n        : \"rjf-form-group-inner\";\n\n    return (\n        <div className=\"rjf-form-group\">\n            {props.level === 0 && <GroupTitle editable={props.editable} onEdit={props.onEdit}>{props.schema.title}</GroupTitle>}\n            <div className={innerClassName}>\n                {props.level > 0 && <GroupTitle editable={props.editable} onEdit={props.onEdit}>{props.schema.title}</GroupTitle>}\n                {props.children}\n                {props.addable && \n                <Button\n                    className=\"add\"\n                    onClick={(e) => props.onAdd()}\n                    title={props.schema.type === 'object' ? 'Add new key' : 'Add new item'}\n                >\n                    {props.schema.type === 'object' ? 'Add key' : 'Add item'}\n                </Button>\n                }\n            </div>\n        </div>\n    );\n}\n","import Button from './buttons';\nimport Loader from './loaders';\nimport {EditorContext, capitalize} from '../util';\nimport {FormFileInput} from './form.js';\nimport Icon from './icons';\n\nexport default class FileUploader extends React.Component {\n    static contextType = EditorContext;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: props.value,\n            //fileName: this.getFileName(),\n            loading: false,\n            open: false,\n            pane: 'upload'\n        };\n\n        this.inputRef = React.createRef();\n    }\n\n    openModal = (e) => {\n        this.setState({open: true});\n    }\n\n    closeModal = (e) => {\n        this.setState({open: false, pane: 'upload'});\n    }\n\n    togglePane = (name) => {\n        this.setState({pane: name});\n    }\n\n    handleFileSelect = (value) => {\n        // we create a fake event\n        let event = {\n            target: {\n                type: 'text',\n                value: value,\n                name: this.props.name\n            }\n        };\n\n        this.props.onChange(event);\n\n        this.closeModal();\n    }\n\n    handleFileUpload = (e) => {\n        this.props.onChange(e);\n        this.closeModal();\n    }\n\n    clearFile = () => {\n        if (window.confirm('Do you want to remove this file?')) {\n            let event = {\n                target: {\n                    type: 'text',\n                    value: '',\n                    name: this.props.name\n                }\n            };\n\n            this.props.onChange(event);\n        }\n    }\n\n    render() {\n        if (!this.context.fileListEndpoint) {\n            return <FormFileInput {...this.props} />;\n        }\n\n        return (\n            <div>\n                {this.props.label && <label>{this.props.label}</label>}\n                <div className=\"rjf-file-field\">\n                {this.props.value && \n                    <div className=\"rjf-current-file-name\">\n                        Current file: <span>{this.props.value}</span> {' '}\n                        <Button className=\"remove-file\" onClick={this.clearFile}>Clear</Button>\n                    </div>\n                }\n                <Button onClick={this.openModal} className=\"upload-modal__open\">\n                    {this.props.value ? 'Change file' : 'Select file'}\n                </Button>\n                </div>\n\n                <ReactModal\n                    isOpen={this.state.open}\n                    onRequestClose={this.closeModal}\n                    contentLabel=\"Select file\"\n                    portalClassName=\"rjf-modal-portal\"\n                    overlayClassName=\"rjf-modal__overlay\"\n                    className=\"rjf-modal__dialog\"\n                    bodyOpenClassName=\"rjf-modal__main-body--open\"\n                    closeTimeoutMS={150}\n                    ariaHideApp={false}\n                >\n                    <div className=\"rjf-modal__content\">\n                        <div className=\"rjf-modal__header\">\n                            <TabButton\n                                onClick={this.togglePane}\n                                tabName=\"upload\"\n                                active={this.state.pane === \"upload\"}\n                            >\n                                Upload new\n                            </TabButton>{' '}\n                            <TabButton\n                                onClick={this.togglePane}\n                                tabName=\"library\"\n                                active={this.state.pane === \"library\"}\n                            >\n                                Choose from library\n                            </TabButton>\n                            \n                            <Button className=\"modal__close\" onClick={this.closeModal} title=\"Close (Esc)\">\n                                <Icon name=\"x-lg\" />\n                            </Button>\n                        </div>\n                        <div className=\"rjf-modal__body\">\n\n                            {this.state.pane === 'upload' &&\n                                <UploadPane\n                                    {...this.props}\n                                    onChange={this.handleFileUpload}\n                                    label=''\n                                    value=''\n                                    help_text=''\n                                />\n                            }\n                            {this.state.pane === 'library' &&\n                                <LibraryPane\n                                    fileListEndpoint={this.context.fileListEndpoint}\n                                    endpointArgs={{\n                                        field_name: this.context.fieldName,\n                                        model_name: this.context.modelName,\n                                        coordinates: JSON.stringify(this.props.name.split('-').slice(1)),\n                                        uid: this.context.uid\n                                    }}\n                                    onFileSelect={this.handleFileSelect}\n                                />\n                            }\n\n                        </div>\n                        <div className=\"rjf-modal__footer\">\n                            <Button className=\"modal__footer-close\" onClick={this.closeModal}>Cancel</Button>\n                        </div>\n                    </div>\n                </ReactModal>\n            </div>\n        );\n    }\n}\n    \n\nfunction TabButton(props) {\n    let className = 'rjf-upload-modal__tab-button';\n    if (props.active)\n        className += ' rjf-upload-modal__tab-button--active';\n\n    return (\n        <button\n            onClick={() => props.onClick(props.tabName)}\n            className={className}\n        >\n            {props.children}\n        </button>\n    );\n}\n\n\nfunction UploadPane(props) {\n    return (\n        <div class=\"rjf-upload-modal__pane\">\n            <h3>Upload new</h3>\n            <br/>\n            <FormFileInput {...props} />\n        </div>\n    );\n}\n\n\nclass LibraryPane extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            files: [],\n            page: 0, // current page\n            hasMore: true,\n        };\n    }\n\n    componentDidMount() {\n        //setTimeout(() => this.setState({loading: false}), 1000);\n        this.fetchList();\n    }\n\n    fetchList = () => {\n        let endpoint = this.props.fileListEndpoint;\n\n        if (!endpoint) {\n            console.error(\n                \"Error: fileListEndpoint option need to be passed \"\n                + \"while initializing editor for enabling file listing.\");\n            this.setState({loading: false, hasMore: false});\n            return;\n        }\n\n        let url = endpoint + '?' + new URLSearchParams({\n            ...this.props.endpointArgs,\n            page: this.state.page + 1\n        });\n\n        fetch(url, {method: 'GET'})\n        .then((response) => response.json())\n        .then((result) => {\n            if (!Array.isArray(result.file_list))\n                result.file_list = [];\n\n            this.setState((state) => ({\n                loading: false,\n                files: [...state.files, ...result.file_list],\n                page: result.file_list.length > 0 ? state.page + 1 : state.page,\n                hasMore: result.file_list.length > 0,\n            })\n            );\n        })\n        .catch((error) => {\n            alert('Something went wrong while retrieving media files');\n            console.error('Error:', error);\n            this.setState({loading: false});\n        });\n    }\n\n    onLoadMore = (e) => {\n        this.setState({loading: true}, this.fetchList);\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-upload-modal__pane\">\n                <h3>Media library</h3>\n\n                <div className=\"rjf-upload-modal__media-container\">\n                {this.state.files.map((i) => {\n                    return <MediaTile {...i} onClick={this.props.onFileSelect} />\n                })}\n                </div>\n\n                {this.state.loading && <Loader className=\"rjf-upload-modal__media-loader\" />}\n\n                {!this.state.loading && this.state.hasMore  &&\n                    <div>\n                        <Button onClick={this.onLoadMore} className=\"upload-modal__media-load\">\n                            <Icon name=\"arrow-down\" /> View more\n                        </Button>\n                    </div>\n                }\n                {!this.state.hasMore && \n                    <div className=\"rjf-upload-modal__media-end-message\">\n                        {this.state.files.length ? 'End of list' : 'No files found'}\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\n\nconst DEFAULT_THUBNAIL = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='%23999999' class='bi bi-file-earmark' viewBox='0 0 16 16'%3E%3Cpath d='M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z'/%3E%3C/svg%3E\";\n\n\nfunction MediaTile(props) {\n    let metadata = props.metadata || {};\n\n    return (\n        <div className=\"rjf-upload-modal__media-tile\">\n            <div className=\"rjf-upload-modal__media-tile-inner\" tabIndex=\"0\" onClick={() => props.onClick(props.value)}>\n                <img src={props.thumbnail ? props.thumbnail : DEFAULT_THUBNAIL} />\n                {props.metadata &&\n                    <div className=\"rjf-upload-modal__media-tile-metadata\">\n                        {Object.getOwnPropertyNames(metadata).map((key) => {\n                            return <span>{metadata[key]}</span>;\n                        })}\n                    </div>\n                }\n            </div>\n        </div>\n    );\n}\n","import {getBlankData} from './data';\nimport {Button, FormInput, FormCheckInput, FormRadioInput, FormSelectInput,\n    FormFileInput, FormRow, FormGroup, GroupTitle, FormRowControls, FormTextareaInput,\n    FormDateTimeInput, FormMultiSelectInput, FileUploader} from './components';\nimport {getVerboseName} from './util';\n\n\nfunction handleChange(e, fieldType, callback) {\n    let type = e.target.type\n    let value;\n\n    if (type === 'checkbox') {\n        value = e.target.checked;\n    } else {\n        value = e.target.value;\n    }\n\n    if (fieldType === 'number' || fieldType === 'integer') {\n        value = value.trim();\n        if (value === '')\n            value = null;\n        else if (!isNaN(Number(value)))\n            value = Number(value);\n    } else if (fieldType === 'boolean') {\n        if (value === 'false' || value === false)\n            value = false;\n        else\n            value = true;\n    }\n\n    callback(e.target.name, value);\n}\n\n\nfunction FormField(props) {\n    let inputProps = {\n        name: props.name,\n        value: props.data,\n        readOnly: props.schema.readOnly || props.schema.readonly,\n        help_text: props.schema.help_text || props.schema.helpText,\n    };\n\n    if (props.schema.placeholder)\n        inputProps.placeholder = props.schema.placeholder; \n\n    let type = props.schema.type;\n    let choices = props.schema.choices || props.schema.enum;\n\n    if (choices) {\n        inputProps.options = choices;\n        type = 'select';\n    }\n\n    if (props.schema.widget) {\n         if (props.schema.widget === 'multiselect' && props.parentType !== 'array') {\n            // pass\n         } else {\n            type = props.schema.widget;\n         }\n    }\n\n\n    let InputField;\n\n    switch (type) {\n        case 'string':\n            InputField = FormInput;\n\n            if (props.schema.format) {\n                if (props.schema.format === 'data-url') {\n                    InputField = FormFileInput;\n                } else if (props.schema.format === 'file-url') {\n                    InputField = FileUploader;\n                } else if (props.schema.format === 'datetime') {\n                    InputField = FormDateTimeInput;\n                }\n                inputProps.type = props.schema.format;\n            }\n            else {\n                inputProps.type = 'text';\n            }\n            break;\n        case 'number':\n            inputProps.type = 'number';\n            InputField = FormInput;\n            break;\n        case 'integer':\n            inputProps.type = 'number';\n            inputProps.step = '1';\n            InputField = FormInput;\n            break;\n        case 'boolean':\n            inputProps.type = 'checkbox';\n            InputField = FormCheckInput;\n            break;\n        case 'checkbox':\n            inputProps.type = 'checkbox';\n            InputField = FormCheckInput;\n            break;\n        case 'radio':\n            inputProps.type = 'radio';\n            InputField = FormRadioInput;\n            break;\n        case 'select':\n            InputField = FormSelectInput;\n            break;\n        case 'multiselect':\n            InputField = FormMultiSelectInput;\n            break;\n        case 'textarea':\n            InputField = FormTextareaInput;\n            break;\n        default:\n            inputProps.type = 'text';\n            InputField = FormInput;\n    }\n\n   return (\n        <InputField \n            {...inputProps}\n            label={\n                props.editable ? <span>{props.schema.title} <Button className=\"edit\" onClick={props.onEdit} title=\"Edit\">Edit</Button></span>\n                :\n                props.schema.title\n            }\n            onChange={(e) => handleChange(e, props.schema.type, props.onChange)}\n        />\n    );\n}\n\n\nexport function getStringFormRow(args) {\n    let {\n        data, schema, name, onChange, onRemove, removable, onEdit, editable, \n        onMoveUp, onMoveDown, parentType, ...fieldProps\n    } = args;\n\n    return (\n        <FormRow \n            key={name}\n            onRemove={removable ? (e) => onRemove(name) : null}\n            onMoveUp={onMoveUp}\n            onMoveDown={onMoveDown}\n        >\n            <FormField \n                data={data}\n                schema={schema}\n                name={name}\n                onChange={onChange}\n                onEdit={onEdit}\n                editable={editable}\n                parentType={parentType}\n                {...fieldProps}\n            />\n        </FormRow>\n    );\n}\n\nexport function getArrayFormRow(args) {\n    let {data, schema, name, onChange, onAdd, onRemove, onMove, level} = args;\n\n    let rows = [];\n    let groups = [];\n\n    let removable = true;\n    let min_items = schema.min_items || schema.minItems || 0;\n    if (data.length <= min_items)\n        removable = false;\n\n    let addable = true;\n    let max_items = schema.max_items || schema.maxItems || 100;\n    if (data.length >= max_items)\n        addable = false;\n\n    let isRef = schema.items.hasOwnProperty('$ref');\n\n    if (isRef)\n        schema.items = args.getRef(schema.items['$ref']);\n\n    let type = schema.items.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    let nextArgs = {\n        schema: schema.items,\n        onChange: onChange,\n        onAdd: onAdd,\n        onRemove: onRemove,\n        level: level + 1,\n        removable: removable,\n        onMove: onMove,\n        parentType: 'array',\n        getRef: args.getRef\n    };\n\n    if (nextArgs.schema.widget === 'multiselect') {\n        nextArgs.data = data;\n        nextArgs.name = name;\n        nextArgs.removable = false;\n        nextArgs.onMoveUp = null;\n        nextArgs.onMoveDown = null;\n        addable = false;\n        rows.push(getStringFormRow(nextArgs));\n    } else {\n\n        for (let i = 0; i < data.length; i++) {\n            nextArgs.data = data[i];\n            nextArgs.name = name + '-' + i;\n\n            if (i === 0)\n                nextArgs.onMoveUp = null;\n            else\n                nextArgs.onMoveUp = (e) => onMove(name + '-' + i, name + '-' + (i - 1));\n\n            if (i === data.length - 1)\n                nextArgs.onMoveDown = null;\n            else\n                nextArgs.onMoveDown = (e) => onMove(name + '-' + i, name + '-' + (i + 1));\n\n            if (type === 'array') {\n                groups.push(getArrayFormRow(nextArgs));\n            } else if (type === 'object') {\n                groups.push(getObjectFormRow(nextArgs));\n            } else {\n                rows.push(getStringFormRow(nextArgs));\n            } \n        }\n    }\n\n    let coords = name; // coordinates for insertion and deletion\n\n    if (rows.length || (!rows.length && !groups.length)) {\n        rows = (\n            <FormGroup\n                level={level}\n                schema={schema}\n                addable={addable}\n                onAdd={() => onAdd(getBlankData(schema.items, args.getRef), coords)}\n                editable={args.editable}\n                onEdit={args.onEdit}\n                key={'row_group_' + name}\n            >\n                {rows}\n            </FormGroup>\n        );\n\n        if (args.parentType === 'object' && args.removable) {\n            rows = (\n                <div className=\"rjf-form-group-wrapper\" key={'row_group_wrapper_' + name}>\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                    {rows}\n                </div>\n            );\n        }\n    }\n\n    if (groups.length) {\n        let groupTitle = schema.title ? <GroupTitle editable={args.editable} onEdit={args.onEdit}>{schema.title}</GroupTitle> : null;\n\n        groups = (\n            <div key={'group_' + name} className=\"rjf-form-group-wrapper\">\n                {args.parentType === 'object' && args.removable &&\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                }\n                <div className=\"rjf-form-group\">\n                    <div className={level > 0 ? \"rjf-form-group-inner\" : \"\"}>\n                        {groupTitle}\n                        {groups.map((i, index) => (\n                            <div className=\"rjf-form-group-wrapper\" key={'group_wrapper_' + name + '_' + index}>\n                                <FormRowControls\n                                    onRemove={removable ? (e) => onRemove(name + '-' + index) : null}\n                                    onMoveUp={index > 0 ? (e) => onMove(name + '-' + index, name + '-' + (index - 1)) : null}\n                                    onMoveDown={index < groups.length - 1 ? (e) => onMove(name + '-' + index, name + '-' + (index + 1)) : null}\n                                />\n                                {i}\n                            </div>\n                            )\n                        )}\n                        {addable && \n                            <Button\n                                className=\"add\"\n                                onClick={(e) => onAdd(getBlankData(schema.items, args.getRef), coords)}\n                                title=\"Add new item\"\n                            >\n                                Add item\n                            </Button>\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return [...rows, ...groups];\n}\n\n\nexport function getObjectFormRow(args) {\n    let {data, schema, name, onChange, onAdd, onRemove, level, onMove} = args;\n\n    let rows = [];\n\n    let schema_keys = schema.keys || schema.properties;\n\n    let keys = [...Object.keys(schema_keys)];\n\n    if (schema.additionalProperties)\n        keys = [...keys, ...Object.keys(data).filter((k) => keys.indexOf(k) === -1)];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let value = data[key];\n        let childName = name + '-' + key;\n        let schemaValue = schema_keys[key];\n\n        if (typeof schemaValue === 'undefined') {\n            // for keys added through additionalProperties\n            if (typeof schema.additionalProperties === 'boolean')\n                schemaValue = {type: 'string'};\n            else\n                schemaValue = {...schema.additionalProperties};\n        }\n\n        let isRef = schemaValue.hasOwnProperty('$ref');\n\n        if (isRef)\n            schemaValue = args.getRef(schemaValue['$ref']);\n\n        let type = schemaValue.type;\n    \n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n\n        if (!schemaValue.title || (isRef && schema.additionalProperties)) // for additionalProperty refs, use the key as the title\n            schemaValue.title = getVerboseName(key);\n\n        let removable = false;\n        if (schema_keys[key] === undefined)\n            removable = true;\n\n        let nextArgs = {\n            data: value,\n            schema: schemaValue,\n            name: childName,\n            onChange: onChange,\n            onAdd: onAdd,\n            onRemove: onRemove,\n            level: level + 1,\n            removable: removable,\n            onMove: onMove,\n            parentType: 'object',\n            getRef: args.getRef,\n        };\n\n        nextArgs.onEdit = () => handleKeyEdit(data, key, value, childName, onAdd, onRemove);\n        nextArgs.editable = removable;\n\n         if (type === 'array') {\n            rows.push(getArrayFormRow(nextArgs));\n        } else if (type === 'object') {\n            rows.push(getObjectFormRow(nextArgs));\n        } else {\n            rows.push(getStringFormRow(nextArgs));\n        }\n    }\n\n    if (rows.length || schema.additionalProperties) {\n        let coords = name;\n\n        rows = (\n            <FormGroup\n                level={level}\n                schema={schema}\n                addable={schema.additionalProperties}\n                onAdd={() => handleKeyValueAdd(data, coords, onAdd, schema.additionalProperties, args.getRef)}\n                editable={args.editable}\n                onEdit={args.onEdit}\n                key={'row_group_' + name}\n            >\n                {rows}\n            </FormGroup>\n        );\n        if (args.parentType === 'object' && args.removable) {\n            rows = (\n                <div className=\"rjf-form-group-wrapper\" key={'row_group_wrapper_' + name}>\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                    {rows}\n                </div>\n            );\n        }\n\n    }\n\n    return rows;\n}\n\n\nfunction handleKeyValueAdd(data, coords, onAdd, newSchema, getRef) {\n    let key = prompt(\"Add new key\");\n    if (key === null) // clicked cancel\n        return;\n\n    if (newSchema === true)\n        newSchema = {type: 'string'};\n\n    key = key.trim();\n    if (!key)\n        alert(\"(!) Can't add empty key.\\r\\n\\r\\n\");\n    else if (data.hasOwnProperty(key))\n        alert(\"(!) Duplicate keys not allowed. This key already exists.\\r\\n\\r\\n\");\n    else\n        onAdd(getBlankData(newSchema, getRef), coords + '-' + key);   \n}\n\n\nfunction handleKeyEdit(data, key, value, coords, onAdd, onRemove) {\n    let newKey = prompt(\"Rename key\", key);\n    if (newKey === null) // clicked cancel\n        return;\n\n    newKey = newKey.trim();\n\n    if (newKey === key) // same keys\n        return;\n\n    if (!newKey)\n        return alert(\"(!) Key name can't be empty.\\r\\n\\r\\n\");\n    else if (data.hasOwnProperty(newKey))\n        return alert(\"(!) Duplicate keys not allowed. This key already exists.\\r\\n\\r\\n\");\n\n    let newCoords = coords.split('-');\n    newCoords.pop();\n    newCoords.push(newKey);\n    newCoords = newCoords.join('-');\n\n    onAdd(value, newCoords);\n    onRemove(coords);\n}\n","import {getBlankData, getSyncedData} from './data';\nimport {getArrayFormRow, getObjectFormRow} from './ui';\nimport {EditorContext} from './util';\n\n\nexport default class Form extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.dataInput = document.getElementById(this.props.dataInputId);\n        this.schema = props.schema;\n\n        let data = props.data;\n\n        if (!data) {\n            // create empty data from schema\n            data = getBlankData(this.schema, this.getRef);\n        } else {\n            // data might be stale if schema has new keys, so add them to data\n            try {\n                data = getSyncedData(data, this.schema, this.getRef);\n            } catch (error) {\n                console.error(\"Error: Schema and data structure don't match\");\n                console.error(error);\n            }\n        }\n\n        this.state = {\n            value: '',\n            data: data\n        };\n        \n        // update data in the input\n        this.populateDataInput();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.data !== prevState.data) {\n            this.populateDataInput();\n        }\n    }\n\n    populateDataInput = () => {\n        this.dataInput.value = JSON.stringify(this.state.data);\n    }\n\n    handleChange = (coords, value) => {\n        /*\n            e.target.name is a chain of indices and keys:\n            xxx-0-key-1-key2 and so on.\n            These can be used as coordinates to locate \n            a particular deeply nested item.\n\n            This first coordinate is not important and should be removed.\n        */\n        coords = coords.split('-');\n\n        coords.shift(); // remove first coord\n\n        function setDataUsingCoords(coords, data, value) {\n            let coord = coords.shift();\n            if (!isNaN(Number(coord)))\n                coord = Number(coord);\n\n            if (coords.length) {\n                setDataUsingCoords(coords, data[coord], value);\n            } else {\n                data[coord] = value;\n            }\n        }\n\n        let _data = JSON.parse(JSON.stringify(this.state.data));\n\n        setDataUsingCoords(coords, _data, value);\n\n        this.setState({data: _data});\n    }\n\n    getRef = (ref) => {\n        /* Returns schema reference. Nothing to do with React's refs.*/\n\n        let refSchema;\n        let tokens = ref.split('/');\n\n        for (let i = 0; i < tokens.length; i++) {\n            let token = tokens[i];\n\n            if (token === '#')\n                refSchema = this.schema;\n            else\n                refSchema = refSchema[token];\n        }\n\n\n        return {...refSchema};\n    }\n\n    getFields = () => {\n        let data = this.state.data;\n        let formGroups = [];\n\n        try {\n            let type = this.schema.type;\n    \n            if (type === 'list')\n                type = 'array';\n            else if (type === 'dict')\n                type = 'object';\n\n            let args = {\n                data: data,\n                schema: this.schema,\n                name: 'rjf',\n                onChange: this.handleChange,\n                onAdd: this.addFieldset,\n                onRemove: this.removeFieldset,\n                onMove: this.moveFieldset,\n                level: 0,\n                getRef: this.getRef,\n            };\n\n            if (type === 'array') {\n                return getArrayFormRow(args);\n            } else if (type === 'object') {\n                return getObjectFormRow(args);\n            }\n        } catch (error) {\n            formGroups = (\n                <p style={{color: '#f00'}}>\n                    <strong>(!) Error:</strong> Schema and data structure do not match.\n                </p>\n            );\n        }\n\n        return formGroups;\n    }\n\n    addFieldset = (blankData, coords) => {\n        coords = coords.split('-');\n        coords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            addDataUsingCoords(coords, _data, blankData);\n\n            return {data: _data};\n        });\n    }\n\n    removeFieldset = (coords) => {\n        coords = coords.split('-');\n        coords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            removeDataUsingCoords(coords, _data);\n\n            return {data: _data};\n        });\n    }\n\n    moveFieldset = (oldCoords, newCoords) => {\n        oldCoords = oldCoords.split(\"-\");\n        oldCoords.shift();\n\n        newCoords = newCoords.split(\"-\");\n        newCoords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            moveDataUsingCoords(oldCoords, newCoords, _data);\n\n            return {data: _data};\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-form-wrapper\">\n                <fieldset className=\"module aligned\">\n                    <EditorContext.Provider \n                        value={{\n                            fileUploadEndpoint: this.props.fileUploadEndpoint,\n                            fileListEndpoint: this.props.fileListEndpoint,\n                            fieldName: this.props.fieldName,\n                            modelName: this.props.modelName,\n                            uid: this.props.uid,\n                        }}\n                    >\n                    {this.getFields()}\n                    </EditorContext.Provider>\n                </fieldset>\n            </div>\n        );\n    }\n}\n\n\nfunction addDataUsingCoords(coords, data, value) {\n    let coord = coords.shift();\n    if (!isNaN(Number(coord)))\n        coord = Number(coord);\n\n    if (coords.length) {\n        addDataUsingCoords(coords, data[coord], value);\n    } else {\n        if (Array.isArray(data[coord])) {\n            data[coord].push(value);\n        }\n        else {\n            if (Array.isArray(data)) {\n                data.push(value);\n            } else {\n                data[coord] = value;\n            }\n        }\n    }\n}\n\nfunction removeDataUsingCoords(coords, data) {\n    let coord = coords.shift();\n    if (!isNaN(Number(coord)))\n        coord = Number(coord);\n\n    if (coords.length) {\n        removeDataUsingCoords(coords, data[coord]);\n    } else {\n        if (Array.isArray(data))\n            data.splice(coord, 1); // in-place mutation\n        else\n            delete data[coord];\n    }\n}\n\n\nfunction moveDataUsingCoords(oldCoords, newCoords, data) {\n    let oldCoord = oldCoords.shift();\n\n    if (!isNaN(Number(oldCoord)))\n        oldCoord = Number(oldCoord);\n\n    if (oldCoords.length) {\n        moveDataUsingCoords(oldCoords, newCoords, data[oldCoord]);\n    } else {\n        if (Array.isArray(data)) {\n            /* Using newCoords allows us to move items from \n            one array to another. \n            However, for now, we're only moving items in a \n            single array.\n            */\n            let newCoord = newCoords[newCoords.length - 1];\n            \n            let item = data[oldCoord];\n\n            data.splice(oldCoord, 1);\n            data.splice(newCoord, 0, item);\n        }\n    }\n}\n","import JSONForm from './renderer';\n\n\nexport default {\n  JSONForm,\n};","import Form from './form';\n\n\nexport default function JSONForm(config) {\n    this.containerId = config.containerId;\n    this.dataInputId = config.dataInputId;\n    this.schema = config.schema;\n    this.data = config.data;\n    this.fileUploadEndpoint = config.fileUploadEndpoint;\n    this.fileListEndpoint = config.fileListEndpoint;\n    this.fieldName = config.fieldName;\n    this.modelName = config.modelName;\n    this.uid = config.uid;\n\n    this.render = function() {\n        ReactDOM.render(\n            <Form\n                schema={this.schema}\n                dataInputId={this.dataInputId}\n                data={this.data}\n                fileUploadEndpoint={this.fileUploadEndpoint}\n                fileListEndpoint={this.fileListEndpoint}\n                fieldName={this.fieldName}\n                modelName={this.modelName}\n                uid={this.uid}\n            />,\n            document.getElementById(this.containerId)\n        );\n    }\n}"],"names":["getBlankObject","schema","getRef","keys","schema_keys","properties","key","value","isRef","hasOwnProperty","type","getBlankArray","items","minItems","min_items","push","widget","getBlankData","getSyncedArray","data","newData","JSON","parse","stringify","i","length","item","getSyncedObject","Object","schemaValue","Button","className","props","classes","split","React","trim","children","Loader","Icon","icon","name","ChevronUp","ChevronDown","ArrowDown","XLg","xmlns","width","height","fill","viewBox","fillRule","d","TimePicker","sendValue","_this","onChange","validateValue","handleChange","e","target","dataset","isNaN","validValue","parseInt","startsWith","toString","padStart","handleKeyDown","keyCode","handleSpin","handleBlur","componentWillUnmount","hh","this","mm","ss","render","onClick","_this2","onBlur","onKeyDown","ampm","Component","EditorContext","createContext","capitalize","string","charAt","toUpperCase","substr","toLowerCase","getCsrfCookie","csrfCookies","document","cookie","filter","indexOf","input","querySelector","FormInput","label","help_text","inputRef","ref","FormCheckInput","undefined","checked","readOnly","disabled","FormRadioInput","options","map","option","inputValue","FormSelectInput","FormMultiSelectInput","showOptions","state","setState","hideOptions","toggleOptions","optionsContainer","createRef","error","FormMultiSelectInputOptions","containerRef","hasHelpText","handleClickOutside","current","contains","componentDidMount","addEventListener","removeEventListener","style","marginTop","selected","_this3","optionClassName","FormFileInput","_this4","getFileName","extractFileInfo","dataURL","dataURI","splitted","params","replace","param","binary","atob","array","charCodeAt","blob","window","Blob","Uint8Array","dataURItoBlob","size","addNameToDataURL","encodeURIComponent","file","files","fileName","reader","FileReader","onload","event","result","readAsDataURL","endpoint","context","fileUploadEndpoint","console","alert","loading","formData","FormData","append","fieldName","modelName","uid","slice","fetch","method","headers","body","then","response","json","file_path","showFileBrowser","click","clearFile","confirm","componentDidUpdate","prevProps","prevState","contextType","FormTextareaInput","_this5","updateHeight","el","offset","offsetHeight","clientHeight","scrollHeight","FormDateTimeInput","_this6","getStateFromProps","date","ms","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","showTimePicker","timePickerContainer","timeInput","NaN","toISOString","err","handleDateChange","handleTimeChange","changed","newState","onFocus","GroupTitle","editable","onEdit","title","animate","animation","callback","parentElement","prevEl","previousElementSibling","nextEl","nextElementSibling","classList","add","y","getBoundingClientRect","y1","y2","opacity","transform","setTimeout","remove","FormRowControls","onMoveUp","onMoveDown","onRemove","FormRow","FormGroup","hasChildren","Children","count","innerClassName","level","addable","onAdd","FileUploader","openModal","open","closeModal","pane","togglePane","handleFileSelect","handleFileUpload","fileListEndpoint","ReactModal","isOpen","onRequestClose","contentLabel","portalClassName","overlayClassName","bodyOpenClassName","closeTimeoutMS","ariaHideApp","TabButton","tabName","active","UploadPane","LibraryPane","endpointArgs","field_name","model_name","coordinates","onFileSelect","class","fetchList","hasMore","url","URLSearchParams","page","Array","isArray","file_list","onLoadMore","MediaTile","metadata","tabIndex","src","thumbnail","getOwnPropertyNames","FormField","inputProps","readonly","helpText","placeholder","InputField","choices","parentType","format","step","fieldType","Number","getStringFormRow","args","removable","fieldProps","getArrayFormRow","onMove","rows","groups","max_items","maxItems","nextArgs","getObjectFormRow","coords","groupTitle","index","additionalProperties","k","childName","getVerboseName","newKey","prompt","newCoords","pop","join","handleKeyEdit","newSchema","handleKeyValueAdd","Form","populateDataInput","dataInput","shift","_data","setDataUsingCoords","coord","refSchema","tokens","token","getFields","formGroups","addFieldset","removeFieldset","moveFieldset","color","blankData","addDataUsingCoords","removeDataUsingCoords","oldCoords","moveDataUsingCoords","getElementById","dataInputId","getSyncedData","Provider","splice","oldCoord","newCoord","JSONForm","config","containerId","ReactDOM"],"mappings":"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"}